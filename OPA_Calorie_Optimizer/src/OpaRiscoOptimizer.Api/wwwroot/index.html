<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OPA - Optimizador de Elementos (Risco)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>

<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand fw-semibold d-flex align-items-center">
                <img src="images/logo-opa.png" alt="OPA SAS" style="height:50px;" class="me-2">
                OPA - Optimizador de Elementos
            </span>
            <div class="d-flex gap-2">
                <a class="btn btn-outline-light btn-sm" href="/swagger" target="_blank">Swagger</a>
                <a class="btn btn-outline-light btn-sm" href="/api/health" target="_blank">Health</a>
            </div>
        </div>
    </nav>

    <main class="container py-4">
        <div class="row g-4">
            <div class="col-lg-7">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">Entradas</h5>
                        <p class="text-muted mb-3">
                            Ingresa calorías mínimas, peso máximo y los elementos disponibles. Luego presiona
                            <b>Optimizar</b>.
                        </p>

                        <div class="row g-3 mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Mínimo de calorías</label>
                                <input id="minCalories" type="number" class="form-control" min="1" value="15" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Peso máximo (kg)</label>
                                <input id="maxWeightKg" type="number" class="form-control" min="0" step="0.001"
                                    value="10" />
                            </div>
                        </div>

                        <div class="d-flex gap-2 mb-2">
                            <button id="btnAdd" class="btn btn-secondary btn-sm">+ Agregar elemento</button>
                            <button id="btnSample" class="btn btn-outline-secondary btn-sm">Cargar ejemplo</button>
                            <button id="btnClear" class="btn btn-outline-danger btn-sm">Limpiar</button>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-sm align-middle" id="itemsTable">
                                <thead>
                                    <tr>
                                        <th style="width: 15%">Id</th>
                                        <th style="width: 35%">Nombre</th>
                                        <th style="width: 20%">Peso (kg)</th>
                                        <th style="width: 20%">Calorías</th>
                                        <th style="width: 10%"></th>
                                    </tr>
                                </thead>
                                <tbody id="itemsTbody"></tbody>
                            </table>
                        </div>

                        <div class="d-flex gap-2">
                            <button id="btnSolve" class="btn btn-primary">Optimizar</button>
                            <div id="status" class="small text-muted align-self-center"></div>
                        </div>

                        <div id="errorBox" class="alert alert-danger mt-3 d-none"></div>
                    </div>
                </div>
            </div>

            <div class="col-lg-5">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">Resultado</h5>

                        <div class="row g-2 mb-3">
                            <div class="col-6">
                                <div class="metric">
                                    <div class="metric-label">Peso total</div>
                                    <div class="metric-value" id="outWeight">—</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="metric">
                                    <div class="metric-label">Calorías totales</div>
                                    <div class="metric-value" id="outCalories">—</div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-2">
                            <span class="badge bg-secondary" id="outAlgo">—</span>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-sm" id="selectedTable">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Nombre</th>
                                        <th class="text-end">Peso</th>
                                        <th class="text-end">Cal</th>
                                    </tr>
                                </thead>
                                <tbody id="selectedTbody"></tbody>
                            </table>
                        </div>

                        <div id="notes" class="mt-2"></div>

                        <details class="mt-3">
                            <summary class="text-muted">Ver JSON</summary>
                            <pre class="mt-2 p-2 bg-dark text-light rounded small" id="rawJson">{ }</pre>
                        </details>
                    </div>
                </div>

                <div class="text-muted small mt-3">
                    Nota: La solución emplea Programación Dinámica mediante el modelo de mochila 0/1, en el que cada
                    elemento solo
                    puede no tomarse (0) o tomarse completamente (1), para determinar la combinación óptima de
                    elementos.
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; <span id="year"></span> OPA S.A.S. - Prueba Técnica Desarrollador Edwin Giraldo Soto</p>
    </footer>

    <script src="app.js"></script>
</body>

</html>